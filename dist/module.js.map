{"version":3,"sources":["../src/module.js"],"names":["MetricsPanelCtrl","kbn","config","_","moment","panelDefaults","lines","linewidth","fill","points","pointradius","xaxis","show","yaxes","logBase","format","range","from","to","TwoDPanelCtrl","$scope","$injector","$q","$rootScope","panelId","panel","id","defaultsDeep","plotdata","data","xlabel","timestamps","logScales","unitFormats","getUnitFormats","$tooltip","$","throttledDraw","throttle","draw","bind","leading","trailing","events","on","onInitEditMode","onRender","onDataReceived","onDataError","onPanelTeardown","err","empty","addEditorTab","subTabIndex","length","options","hooks","drawHook","processOffset","processOffsetHook","legend","series","zero","lineWidth","translateFillOption","fillColor","radius","shadowSize","grid","minBorderMargin","markings","backgroundColor","borderWidth","hoverable","clickable","color","margin","left","right","crosshair","mode","addXAxis","addYAxes","plot","createPlotHoverHandler","styleTheme","renderingCompleted","dataList","target","slice","forEach","d","xy","ts","maxy","Number","MAX_VALUE","logminy","xoffset","datapoints","val","j","isFinite","push","label","yaxis","stats","max","logmin","render","event","pos","item","dataIndex","y","value","datapoint","x","body","dashboard","formatDate","toPrecision","html","place_tt","pageX","pageY","detach","min","toNumber","defaults","position","index","find","secondY","clone","applyLogScale","configureAxisMode","axis","MIN_VALUE","i","transform","v","Math","log","inverseTransform","pow","ceil","floor","ticks","nextTick","tickDecimals","decimalPlaces","num","toString","split","tickFormatter","valueFormats","scaledDecimals","subItem","getYAxes","formater","isNumber","decimals","$$phase","$digest","yaxisLabel","text","appendTo","gridMargin","panelOptions","bootData","user","lightTheme","css","templateUrl"],"mappings":"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","sourcesContent":["import {MetricsPanelCtrl} from  'app/plugins/sdk';\n//import {ThresholdManager} from 'app/plugins/panel/graph/threshold_manager';\nimport kbn from 'app/core/utils/kbn';\nimport config from 'app/core/config';\n\nimport _ from 'lodash';\nimport moment from 'moment';\n\nimport './css/style.css!';\n\nconst panelDefaults = {\n  lines: true,\n  linewidth: 1,\n  fill: 1,\n  points: false,\n  pointradius: 5,\n  xaxis: {\n    show: true\n  },\n  yaxes: [\n    {\n      show: true,\n      logBase: 1,\n      format: 'short'\n    },\n    /*{\n      show: true,\n      logBase: 1,\n      format: 'short'\n    }*/\n  ],\n  range: {\n    from: null,\n    to: null\n  }\n};\n\nclass TwoDPanelCtrl extends MetricsPanelCtrl {\n  constructor($scope, $injector, $q, $rootScope) {\n    super($scope, $injector);\n    this.$scope = $scope;\n    this.$rootScope = $rootScope;\n    this.panelId = 'twod' + this.panel.id;\n\n    //this.thresholdManager = new ThresholdManager(this);\n\n    // Must use defaultsDeep here to avoid sharing axis, range state as class\n    // variables\n    _.defaultsDeep(this.panel, panelDefaults);\n\n    this.plotdata = {\n      data: [],\n      xlabel: null,\n      timestamps: {}\n    };\n\n    this.logScales = {\n      'linear': 1,\n      'log (base 2)': 2,\n      'log (base 10)': 10,\n      'log (base 32)': 32,\n      'log (base 1024)': 1024\n    };\n\n    this.unitFormats = kbn.getUnitFormats();\n\n    this.$tooltip = $('<div class=\"graph-tooltip\">');\n\n    // Need to throttle plot drawing on the trailing side of the timeout.\n    // Otherwise plot gets drawn with stale height received from enclosing div.\n    // Plotting at the end of the wait period give the div time to achieve a\n    // stable height before flot plotting.\n    this.throttledDraw = _.throttle(this.draw.bind(this), 100, {leading: false, trailing: true});\n\n    this.events.on('init-edit-mode', this.onInitEditMode.bind(this));\n    this.events.on('render', this.onRender.bind(this));\n    this.events.on('data-received', this.onDataReceived.bind(this));\n    this.events.on('data-error', this.onDataError.bind(this));\n    //this.events.on('panel-initialized', this.onPanelInitialized.bind(this));\n    //this.events.on('refresh', this.onRefresh.bind(this));\n    this.events.on('panel-teardown', this.onPanelTeardown.bind(this));\n  }\n\n  onDataError(err) {\n    //console.log(\"onDataError\", err);\n    $('#' + this.panelId).empty();\n    this.plotdata.data = [];\n    this.plotdata.timestamps = {};\n    this.plotdata.xlabel = null;\n  }\n\n  onPanelInitialized() {\n    //console.log('initialized');\n  }\n\n  onPanelTeardown() {\n    //console.log('teardown');\n    $('#' + this.panelId).empty();\n    //this.$timeout.cancel(this.nextTickPromise);\n  }\n\n  onRefresh() {\n    //console.log('refresh');\n  }\n\n  onInitEditMode() {\n    this.addEditorTab('Axes', 'public/plugins/armbrustlab-2dscatter-panel/axes_editor.html', 2);\n    this.addEditorTab('Display', 'public/plugins/armbrustlab-2dscatter-panel/tab_display.html', 3);\n    this.subTabIndex = 0;\n  }\n\n  onRender() {\n    this.throttledDraw();\n  }\n\n  draw() {\n    $('#' + this.panelId).empty();\n\n    if (this.plotdata.data.length === 0) {\n      return;\n    }\n\n    const options = {\n      hooks: {\n        draw: [this.drawHook.bind(this)],\n        processOffset: [this.processOffsetHook.bind(this)],\n      },\n      legend: {\n        show: true, // disable/enable legend\n      },\n      series: {\n        lines: {\n          show: this.panel.lines,\n          zero: false,\n          lineWidth: this.panel.linewidth,\n          fill: this.translateFillOption(this.panel.fill)\n        },\n        points: {\n          show: this.panel.points,\n          fill: 1,\n          fillColor: false,\n          radius: this.panel.points ? this.panel.pointradius : 2\n        },\n        shadowSize: 0\n      },\n      yaxes: [],\n      xaxis: {},\n      grid: {\n        minBorderMargin: 0,\n        markings: [],\n        backgroundColor: null,\n        borderWidth: 0,\n        hoverable: true,\n        clickable: true,\n        color: '#c8c8c8',\n        margin: { left: 0, right: 0 },\n      },\n      crosshair: {\n        mode: 'x'\n      },\n    };\n\n    this.addXAxis(options);\n    this.addYAxes(options);\n\n    // Make plot\n    $('#' + this.panelId).plot(this.plotdata.data, options);\n    // Hover event handler\n    $('#' + this.panelId).bind('plothover', _.throttle(this.createPlotHoverHandler(), 50));\n    // Manually apply theme css\n    this.styleTheme();\n\n    this.renderingCompleted();\n  }\n\n  onDataReceived(dataList) {\n    //console.log('received', dataList);\n    this.plotdata.data = [];\n    this.plotdata.timestamps = {};\n    this.plotdata.xlabel = null;\n\n    if (!dataList || dataList.length < 2) {\n      //console.log( \"No data\", dataList );\n    } else {\n      // First series in dataList is always x-axis data\n      this.plotdata.xlabel = dataList[0].target;\n\n      // Make all y data series and timestamp lists\n      dataList.slice(1).forEach(d => {\n        const xy = [];\n        const ts = [];\n        let maxy = -Number.MAX_VALUE;\n        let logminy = Number.MAX_VALUE;\n        let xoffset = 0;\n        // If this Y doesn't align with the beginning of the X range,\n        // search forward to find the offset into X where it does...\n        if (dataList[0].datapoints[0][1] !== d.datapoints[0][1]) {\n          for (xoffset = 0; xoffset < dataList[0].datapoints.length; xoffset++) {\n            if (dataList[0].datapoints[xoffset][1] === d.datapoints[0][1]) break;\n          }\n        }\n        if (xoffset < dataList[0].datapoints.length) {\n          d.datapoints.forEach((val, j) => {\n            if (_.isFinite(dataList[0].datapoints[j+xoffset][0])) {\n              // Only keep values with defined x, but keep null y to create\n              // discontinuous segments\n              xy.push([dataList[0].datapoints[j+xoffset][0], val[0]]);\n              ts.push(val[1]);  // time for hover tooltip\n              if (val[0] > maxy) maxy = val[0];\n              if (val[0] < logminy && val[0] > 0) logminy = val[0];\n            }\n          });\n        }\n        if (maxy === -Number.MAX_VALUE) maxy = null;\n        if (logminy === Number.MAX_VALUE) logminy = null;\n        this.plotdata.data.push({\n          label: d.target,\n          data: xy,\n          yaxis: 1,\n          stats: {\n            max: maxy,\n            logmin: logminy\n          }\n        });\n        this.plotdata.timestamps[d.target] = ts;\n      });\n\n      //console.log('DATA: ', this.plotdata);\n    }\n\n    this.render();\n  }\n\n  createPlotHoverHandler(event, pos, item) {\n    return (event, pos, item) => {\n      if (item) {\n        const ts = this.plotdata.timestamps[item.series.label][item.dataIndex];\n        const y = { label: item.series.label, value: item.datapoint[1] };\n        const x = { label: this.plotdata.xlabel, value: item.datapoint[0] };\n\n        var body = '<div class=\"graph-tooltip-time\">'+ this.dashboard.formatDate(moment(ts)) +'</div>';\n        body += \"<center>\";\n        body += '<div class=\"graph-tooltip-list-item\">';\n        body += '<div class=\"graph-tooltip-series-name\"><i class=\"fa fa-minus\" style=\"color:' + item.series.color + ';\"></i> ' + x.label + ' (x): </div>';\n        body += '<div class=\"graph-tooltip-value\">' + x.value.toPrecision(4) + '</div>';\n        body += '</div>'\n        body += '<div class=\"graph-tooltip-list-item\">';\n        body += '<div class=\"graph-tooltip-series-name\"><i class=\"fa fa-minus\" style=\"color:' + item.series.color + ';\"></i> ' + y.label + ' (y): </div>';\n        body += '<div class=\"graph-tooltip-value\">' + y.value.toPrecision(4) + '</div>';\n        body += '</div>'\n        body += \"</center>\";\n\n        this.$tooltip.html(body).place_tt(pos.pageX + 20, pos.pageY);\n      } else {\n        this.$tooltip.detach();\n      }\n    };\n  }\n\n  translateFillOption(fill) {\n    return fill === 0 ? 0.001 : fill/10;\n  }\n\n  addXAxis(options) {\n    options.xaxis = {\n      show: this.panel.xaxis.show,\n      min: this.panel.xaxis.min ? _.toNumber(this.panel.xaxis.min) : null,\n      max: this.panel.xaxis.max ? _.toNumber(this.panel.xaxis.max) : null,\n      label: this.panel.xaxis.label\n    };\n  }\n\n  addYAxes(options) {\n    const defaults = {\n      position: 'left',\n      show: this.panel.yaxes[0].show,\n      index: 1,\n      logBase: this.panel.yaxes[0].logBase || 1,\n      min: this.panel.yaxes[0].min ? _.toNumber(this.panel.yaxes[0].min) : null,\n      max: this.panel.yaxes[0].max ? _.toNumber(this.panel.yaxes[0].max) : null,\n    };\n    options.yaxes.push(defaults);\n\n    if (_.find(this.plotdata.data, {yaxis: 2})) {\n      var secondY = _.clone(defaults);\n      secondY.index = 2;\n      secondY.show = this.panel.yaxes[1].show;\n      secondY.logBase = this.panel.yaxes[1].logBase || 1;\n      secondY.position = 'right';\n      secondY.min = this.panel.yaxes[1].min ? _.toNumber(this.panel.yaxes[1].min) : null;\n      secondY.max = this.panel.yaxes[1].max ? _.toNumber(this.panel.yaxes[1].max) : null;\n      options.yaxes.push(secondY);\n\n      this.applyLogScale(options.yaxes[1], this.plotdata.data);\n      //configureAxisMode(options.yaxes[1], panel.percentage && panel.stack ? \"percent\" : panel.yaxes[1].format);\n    }\n    this.applyLogScale(options.yaxes[0], this.plotdata.data);\n    this.configureAxisMode(options.yaxes[0], this.panel.yaxes[0].format);\n  }\n\n  applyLogScale(axis, data) {\n    if (axis.logBase === 1) {\n      return;\n    }\n    if (axis.min < Number.MIN_VALUE) {\n      axis.min = null;\n    }\n    if (axis.max < Number.MIN_VALUE) {\n      axis.max = null;\n    }\n\n    var series, i;\n    var max = axis.max, min = axis.min;\n\n    for (i = 0; i < data.length; i++) {\n      series = data[i];\n      if (series.yaxis === axis.index) {\n        if (!max || max < series.stats.max) {\n          max = series.stats.max;\n        }\n        if (!min || min > series.stats.logmin) {\n          min = series.stats.logmin;\n        }\n      }\n    }\n\n    axis.transform = function(v) { return (v < Number.MIN_VALUE) ? null : Math.log(v) / Math.log(axis.logBase); };\n    axis.inverseTransform  = function (v) { return Math.pow(axis.logBase,v); };\n\n    if (!max && !min) {\n      max = axis.inverseTransform(+2);\n      min = axis.inverseTransform(-2);\n    } else if (!max) {\n      max = min*axis.inverseTransform(+4);\n    } else if (!min) {\n      min = max*axis.inverseTransform(-4);\n    }\n\n    if (axis.min) {\n      min = axis.inverseTransform(Math.ceil(axis.transform(axis.min)));\n    } else {\n      min = axis.min = axis.inverseTransform(Math.floor(axis.transform(min)));\n    }\n    if (axis.max) {\n      max = axis.inverseTransform(Math.floor(axis.transform(axis.max)));\n    } else {\n      max = axis.max = axis.inverseTransform(Math.ceil(axis.transform(max)));\n    }\n\n    if (!min || min < Number.MIN_VALUE || !max || max < Number.MIN_VALUE) {\n      return;\n    }\n\n    axis.ticks = [];\n    var nextTick;\n    for (nextTick = min; nextTick <= max; nextTick *= axis.logBase) {\n      axis.ticks.push(nextTick);\n    }\n    axis.tickDecimals = this.decimalPlaces(min);\n  }\n\n  decimalPlaces(num) {\n    if (!num) { return 0; }\n\n    return (num.toString().split('.')[1] || []).length;\n  }\n\n  configureAxisMode(axis, format) {\n    axis.tickFormatter = function(val, axis) {\n      return kbn.valueFormats[format](val, axis.tickDecimals, axis.scaledDecimals);\n    };\n  }\n\n  setUnitFormat(axis, subItem) {\n    axis.format = subItem.value;\n    this.render();\n  }\n\n  drawHook(plot) {\n    // Update legend values\n    var yaxis = plot.getYAxes();\n    for (var i = 0; i < this.plotdata.data.length; i++) {\n      var series = this.plotdata.data[i];\n      var axis = yaxis[series.yaxis - 1];\n      var formater = kbn.valueFormats[this.panel.yaxes[series.yaxis - 1].format];\n\n      // decimal override\n      if (_.isNumber(this.panel.decimals)) {\n        //series.updateLegendValues(formater, this.panel.decimals, null);\n      } else {\n        // auto decimals\n        // legend and tooltip gets one more decimal precision\n        // than graph legend ticks\n        var tickDecimals = (axis.tickDecimals || -1) + 1;\n        //series.updateLegendValues(formater, tickDecimals, axis.scaledDecimals + 2);\n      }\n\n      if (!this.$rootScope.$$phase) { this.$scope.$digest(); }\n    }\n\n    // add left axis labels\n    if (this.panel.yaxes[0].label) {\n      var yaxisLabel = $(\"<div class='axisLabel left-yaxis-label flot-temp-elem'></div>\")\n      .text(this.panel.yaxes[0].label)\n      .appendTo($('#' + this.panelId));\n    }\n\n    // add right axis labels\n    /*if (this.panel.yaxes[1].label) {\n      var rightLabel = $(\"<div class='axisLabel right-yaxis-label flot-temp-elem'></div>\")\n      .text(this.panel.yaxes[1].label)\n      .appendTo($('#' + this.panelId));\n    }*/\n\n    //this.thresholdManager.draw(plot);\n  }\n\n  processOffsetHook(plot, gridMargin) {\n    var left = this.panel.yaxes[0];\n    //var right = this.panel.yaxes[1];\n    if (left.show && left.label) { gridMargin.left = 20; }\n    //if (right.show && right.label) { gridMargin.right = 20; }\n\n    // apply y-axis min/max options\n    var yaxis = plot.getYAxes();\n    //for (var i = 0; i < yaxis.length; i++) {\n    var axis = yaxis[0];\n    var panelOptions = this.panel.yaxes[0];\n    axis.options.max = panelOptions.max;\n    axis.options.min = panelOptions.min;\n    //}\n  }\n\n  styleTheme() {\n    if (config.bootData.user.lightTheme) {\n      $('.legend > div').css('background-color', 'rgb(255,255,255)');\n    } else {\n      $('.legend > div').css('background-color', 'rgb(25,25,25)');\n    }\n  }\n}\nTwoDPanelCtrl.templateUrl = 'module.html';\n\nexport {\n  TwoDPanelCtrl as PanelCtrl\n};\n"],"file":"module.js"}